{% extends "base.html" %}

{% block content %}
<h1>Compare Players</h1>

<!-- Player Selection Form -->
<form method="POST">
    <label for="players">Select Players:</label>
    <select name="players" multiple>
        {% for player in players %}
            <option value="{{ player['Player'] }}">{{ player['Player'] }}</option>
        {% endfor %}
    </select>
    <button type="submit">Compare</button>
</form>

{% if player_stats %}
    <h2>Comparison Results</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Stat</th>
                {% for player in player_stats %}
                    <th>{{ player["Player"] }}</th>
                {% endfor %}
                {% if league_averages %}
                    <th>League Average</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% set stat_categories = ["PPG", "APG", "RPG", "3P%", "FT%", "FG%", "eFG%"] %}
            {% for stat in stat_categories %}
                <tr>
                    <td>{{ stat }}</td>
                    {% for player in player_stats %}
                        <td>{{ player[stat] if player[stat] is not none else "N/A" }}</td>
                    {% endfor %}
                    {% if league_averages %}
                        <td>{{ league_averages[stat] if league_averages[stat] is not none else "N/A" }}</td>
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}
{% endblock %}